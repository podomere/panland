{{ if .Site.Params.faketestimonials.enable }}
{{ "<!-- Start Testimonaials section -->" | safeHTML }}
<section class="section" id="faketestimonials">
<div class="container">
  <div class="row">
    <div class="col">
      <div class="title text-center">
        {{ with .Site.Params.faketestimonials.topTitle }}<h4>{{. | safeHTML}}</h4>{{ end }}
        {{ with .Site.Params.faketestimonials.title }}
        <h2>{{.}}</h2>
        <span class="border"></span>
        {{ end }}
        {{ with .Site.Params.faketestimonials.subtitle }}<p>{{. | safeHTML}}</p>{{ end }}
      </div>
    </div>
  </div> 
  <div id="customers" class="row">
  </div>
  <div><center><a id="entity_button" href="#" style="" class="btn btn-lg btn-dark mb-3 mt-2">Try Again <i class="fas fa-user-secret"></i></a></center></div>

  <div class="title text-center">
    {{ with .Site.Params.faketestimonials.punchline }}<pre><code>{{. | safeHTML}}</code></pre>{{ end }}
  </div> 
</div>
<!-- End row -->
</div>
<!-- End container -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Faker/3.1.0/faker.min.js"></script>
<script data-cookieconsent="functionality" src="{{ "plugins/lozad/lozad.min.js" | absURL }}"></script>
<script>
  function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }
  function entities() {
    $('#customers').empty();
    var customers = Array(3).fill(0);
    $.when($(customers).each(function (index){
      $("#customers").append("<div class='col-xl-4 col-lg-4 col-md-6 col-xs-12 text-center'><h2 id='custname_'"+index.toString()+"'></h2><a id='custlink_'"+index.toString()+"' href='#' \
          data-toggle='tooltip' data-placement='left' title='Nope, try again!'><img id='custimage_'"+index.toString()+"' src='data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==' \
          data-src='' class='img-responsive rounded-circle lozad'></a><br/><small id='custtitle_'"+index.toString()+"'></small><h4 id='custcompany_'"+index.toString()+"'></h4><br/></br></div>");

      $("[id^='custimage']").each(function (index){
        $(this).attr("data-src","/images/faketestimonials/"+(getRandomInt(1, 507)).toString()+".jpeg");
      });

      $("[id^='custname']").each(function (index){
        $(this).html((faker.name.firstName()).substring(0,1)+'. '+faker.name.lastName());
      });

      $("[id^='custtitle']").each(function (index){
        $(this).html(faker.name.title());
      });

      $("[id^='custcompany']").each(function (index){
        $(this).html(faker.company.companyName());
      });

      })).done(function(){
      el = document.querySelectorAll('img, iframe');
      observer = lozad(el); // passing a `NodeList` (e.g. `document.querySelectorAll()`) is also valid
      observer.observe();
      $("[data-toggle='tooltip']").tooltip({trigger : 'hover'});
      $(document).on('shown.bs.tooltip', function (e) {
        setTimeout(function () {
          $(e.target).tooltip('hide');
        }, 3000);
      });
      $("[id^='custlink']").click(function(e) {
        $('.tooltip').empty();
        entities();
      });
    });
  }

  $('#entity_button').click(function(e) {
    $('.tooltip').empty();
    entities();
  });

  $(function () {
    entities(); 
  });
</script>
</section>
<style>
  .tooltip-inner {
    font-size: 1.5em;
    max-width: 100px;
    max-height: 100px;
    /* If max-width does not work, try using width instead */
    height: 100px; 
    width: 100px; 
  }
</style>
{{ "<!-- End section -->" | safeHTML }}
{{ end }}
